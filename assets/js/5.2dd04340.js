(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{154:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[t._m(0),a("hr"),a("p",[t._v("è·¨åŸŸè¯·æ±‚é’ˆå¯¹æµè§ˆå™¨çš„åŒæºç­–ç•¥(Same-Origin Policy)è€Œè¨€ï¼ŒæŒ‡ä¸€ä¸ªç½‘ç«™ä¸»åŠ¨è¯·æ±‚å¦å¤–ä¸€ä¸ªç½‘ç«™çš„èµ„æº(å›¾ç‰‡ã€javascriptã€è§†é¢‘ç­‰)ã€‚")]),a("p",[t._v("åŒæºç­–ç•¥è¦æ±‚ç½‘ç«™åªèƒ½æœ‰é™åˆ¶çš„è®¿é—®å¤–éƒ¨ç½‘ç«™çš„èµ„æºï¼Œä¸åˆæ³•çš„è¯·æ±‚ä¼šè¢«æ‹¦æˆªã€‚ç½‘ç«™çš„æºç”±åè®®ã€åŸŸåã€ç«¯å£ä¸‰éƒ¨åˆ†ç»„æˆï¼Œæœ‰ä¸€éƒ¨åˆ†ä¸åŒå°±è¢«è§†ä¸ºä¸åŒæºï¼Œä¸¤ä¸ªä¸åŒçš„åŸŸåå³ä¾¿æŒ‡å‘åŒä¸€ä¸ªipåœ°å€ä¹Ÿæ˜¯è·¨åŸŸçš„ã€‚ç½‘ç«™é€šè¿‡AJAXè¯·æ±‚èµ„æºæ˜¯å…¸å‹çš„è·¨åŸŸè¯·æ±‚ï¼Œéœ€è¦å¤–éƒ¨ç½‘ç«™è®¸å¯æ‰èƒ½è®¿é—®ã€‚\n")]),t._m(1),a("p",[t._v("è·¨åŸŸè¯·æ±‚é’ˆå¯¹æµè§ˆå™¨çš„åŒæºç­–ç•¥(Same-Origin Policy)è€Œè¨€ï¼ŒæŒ‡ä¸€ä¸ªç½‘ç«™ä¸»åŠ¨è¯·æ±‚å¦å¤–ä¸€ä¸ªç½‘ç«™çš„èµ„æº(å›¾ç‰‡ã€javascriptã€è§†é¢‘ç­‰)ã€‚")]),a("p",[t._v("åŒæºç­–ç•¥è¦æ±‚ç½‘ç«™åªèƒ½æœ‰é™åˆ¶çš„è®¿é—®å¤–éƒ¨ç½‘ç«™çš„èµ„æºï¼Œä¸åˆæ³•çš„è¯·æ±‚ä¼šè¢«æ‹¦æˆªã€‚ç½‘ç«™çš„æºç”±åè®®ã€åŸŸåã€ç«¯å£ä¸‰éƒ¨åˆ†ç»„æˆï¼Œæœ‰ä¸€éƒ¨åˆ†ä¸åŒå°±è¢«è§†ä¸ºä¸åŒæºï¼Œä¸¤ä¸ªä¸åŒçš„åŸŸåå³ä¾¿æŒ‡å‘åŒä¸€ä¸ªipåœ°å€ä¹Ÿæ˜¯è·¨åŸŸçš„ã€‚ç½‘ç«™é€šè¿‡AJAXè¯·æ±‚èµ„æºæ˜¯å…¸å‹çš„è·¨åŸŸè¯·æ±‚ï¼Œéœ€è¦å¤–éƒ¨ç½‘ç«™è®¸å¯æ‰èƒ½è®¿é—®ã€‚")]),a("p",[t._v("åŒæºç­–ç•¥æ˜¯æµè§ˆå™¨ç«¯çš„å®‰å…¨é™åˆ¶ã€‚")]),t._m(2),t._m(3),t._m(4),t._m(5),a("p",[t._v("é€šå¸¸æµè§ˆå™¨æ§åˆ¶å°ä¼šæ˜ç¡®æ‰“å°å‡ºè·¨åŸŸé”™è¯¯åŠå…¶å¸®åŠ©ä¿¡æ¯ï¼Œå¦‚ï¼š")]),t._m(6),t._m(7),t._m(8),a("p",[t._v("åŸºæœ¬ä¸»æµæµè§ˆå™¨éƒ½å·²ç»æ”¯æŒã€‚")]),t._m(9),t._m(10),t._m(11),t._m(12),a("p",[t._v("GET, HEAD, POST æ–¹æ³•ï¼Œå¹¶ä¸”POSTæ–¹æ³•çš„Content-TypeåªåŒ…å« text/plain, application/x-www-form-urlencoded, multipart/form-data")]),t._m(13),a("p",[t._v("åœ¨ç®€å•è¯·æ±‚ä¹‹å¤–çš„å…¶å®ƒè¯·æ±‚å‘å‡ºå‰ï¼Œéƒ½ä¼šå…ˆå‘ä¸€ä¸ªOPTIONè¯·æ±‚ï¼Œä»¥æ¢æµ‹æœåŠ¡å™¨æ˜¯å¦æ”¯æŒåŠå…è®¸CORSè¯·æ±‚çš„é…ç½®å‚æ•°ã€‚")]),t._m(14),t._m(15),t._m(16),t._m(17),t._m(18),t._m(19),t._m(20),a("p",[t._v("å› æ­¤è¦æ”¯æŒCookiesçš„è·¨åŸŸï¼Œéœ€è¦æœåŠ¡å™¨ç«¯è¿”å›å¦‚ä¸‹å¤´ï¼š")]),t._m(21),a("p",[t._v("é™¤æ­¤ä¹‹å¤–ï¼Œå‰ç«¯åœ¨è¿›è¡Œè¯·æ±‚æ—¶éœ€è¦ç‰¹åˆ«æ ‡æ³¨ï¼š")]),t._m(22),t._m(23),a("p",[t._v("ä¸»è¦æœ‰ä¸¤ç§æ–¹æ³•ï¼š")]),t._m(24),a("ol",[a("li",[t._v("æŸ¥çœ‹æ§åˆ¶å°å‡ºé”™æ—¥å¿—ä¿¡æ¯")]),a("li",[t._v("ä¸‹è½½ "),a("a",{attrs:{href:"https://chrome.google.com/webstore/detail/nlfbmbojpeacfghkpbjhddihlkkiljbi",target:"_blank",rel:"noopener noreferrer"}},[t._v("CORS è°ƒè¯•"),a("OutboundLink")],1),t._v("  æµè§ˆå™¨æ’ä»¶ï¼Œå¼€å¯åé‡æ–°è¯·æ±‚")])]),t._m(25),t._m(26),t._m(27),t._m(28),t._m(29),a("p",[t._v("æ³¨æ„ï¼š")]),t._m(30),t._m(31),t._m(32),t._m(33),t._m(34),t._m(35)])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"æœ‰å…³è·¨åŸŸ-cors-åŠ-nginx-é…ç½®"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æœ‰å…³è·¨åŸŸ-cors-åŠ-nginx-é…ç½®","aria-hidden":"true"}},[this._v("#")]),this._v(" æœ‰å…³è·¨åŸŸ CORS åŠ Nginx é…ç½®")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"ä»€ä¹ˆæ˜¯è·¨åŸŸï¼Ÿ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä»€ä¹ˆæ˜¯è·¨åŸŸï¼Ÿ","aria-hidden":"true"}},[this._v("#")]),this._v(" ä»€ä¹ˆæ˜¯è·¨åŸŸï¼Ÿ")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"/assets/images/15178986212867.jpg",alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("â€œDomains, protocols and ports must matchâ€")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"è·¨åŸŸå¯¹å‰ç«¯çš„å½±å“"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#è·¨åŸŸå¯¹å‰ç«¯çš„å½±å“","aria-hidden":"true"}},[this._v("#")]),this._v(" è·¨åŸŸå¯¹å‰ç«¯çš„å½±å“")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("AJAXï¼šè¯·æ±‚æ— æ³•å‘é€å’Œæ¥æ”¶")]),s("li",[this._v("WebFontsï¼šå­—ä½“æ–‡ä»¶æ— æ³•ä»åˆ«çš„åŸŸåŠ è½½")]),s("li",[this._v("SVGï¼šé€šè¿‡useå¼•ç”¨çš„å¤–éƒ¨èµ„æºæ— æ³•ä½¿ç”¨")]),s("li",[this._v("Canvas/WebGLï¼šå¦‚æ— æ³•è¯»å–å›¾ç‰‡çš„ç‚¹é˜µæ•°æ®ï¼Œæ— æ³•toDateURLç­‰")]),s("li",[this._v("Videoï¼šæ— æ³•æˆªå–å¿«ç…§")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"/assets/images/15178986972043.jpg",alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"corsçš„æµè§ˆå™¨æ”¯æŒ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#corsçš„æµè§ˆå™¨æ”¯æŒ","aria-hidden":"true"}},[this._v("#")]),this._v(" CORSçš„æµè§ˆå™¨æ”¯æŒ")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"/assets/images/15178987236463.jpg",alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"è·¨åŸŸè¯·æ±‚è¿‡ç¨‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#è·¨åŸŸè¯·æ±‚è¿‡ç¨‹","aria-hidden":"true"}},[this._v("#")]),this._v(" è·¨åŸŸè¯·æ±‚è¿‡ç¨‹")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"/assets/images/15178987563714.jpg",alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("é¦–å…ˆæŸ¥çœ‹httpå¤´éƒ¨æœ‰æ— originå­—æ®µï¼›")]),s("li",[this._v("å¦‚æœæ²¡æœ‰ï¼Œæˆ–è€…ä¸å…è®¸ï¼Œç›´æ¥å½“æˆæ™®é€šè¯·æ±‚å¤„ç†ï¼Œç»“æŸï¼›")]),s("li",[this._v("å¦‚æœæœ‰å¹¶ä¸”æ˜¯å…è®¸çš„ï¼Œé‚£ä¹ˆå†çœ‹æ˜¯å¦æ˜¯preflight(method=OPTIONS)ï¼›")]),s("li",[this._v("å¦‚æœæ˜¯preflightï¼Œå°±è¿”å›Allow-Headersã€Allow-Methodsç­‰ï¼Œå†…å®¹ä¸ºç©ºï¼›")]),s("li",[this._v("å¦‚æœä¸æ˜¯preflightï¼Œå°±è¿”å›Allow-Originã€Allow-Credentialsç­‰ï¼Œå¹¶è¿”å›æ­£å¸¸å†…å®¹ã€‚")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"ç®€å•è¯·æ±‚-simple-request"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç®€å•è¯·æ±‚-simple-request","aria-hidden":"true"}},[this._v("#")]),this._v(" ç®€å•è¯·æ±‚(Simple Request)")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"é¢„è¯·æ±‚-preflighted-request"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#é¢„è¯·æ±‚-preflighted-request","aria-hidden":"true"}},[this._v("#")]),this._v(" é¢„è¯·æ±‚(Preflighted Request)")])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("æˆ‘ä»¬çš„å¤§å¤šæ•°AJAXè¯·æ±‚åŒ…å«Authenticationå¤´ï¼Œå› æ­¤è¿™äº›éƒ½ä¸ä¼šæ˜¯ç®€å•è¯·æ±‚ï¼Œæ‰€æœ‰è¯·æ±‚éƒ½éœ€è¦å…ˆå‘ä¸€ä¸ªé¢„è¯·æ±‚ã€‚")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"è·¨åŸŸç›¸å…³http-headers"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#è·¨åŸŸç›¸å…³http-headers","aria-hidden":"true"}},[this._v("#")]),this._v(" è·¨åŸŸç›¸å…³HTTP Headers")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"ç›¸å…³headersä»‹ç»"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç›¸å…³headersä»‹ç»","aria-hidden":"true"}},[this._v("#")]),this._v(" ç›¸å…³Headersä»‹ç»")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"/assets/images/15179074088703.jpg",alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("è¯·æ±‚å¤´éƒ½æ˜¯ç”±æµè§ˆå™¨è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œæ ¹æ®è¯·æ±‚çš„ä¸æ˜¯å½“å‰åŸŸè¿›è¡Œåˆ¤æ–­ã€‚")]),s("li",[this._v("æœåŠ¡å™¨ç«¯éœ€è¦æ”¯æŒOPTIONè¯·æ±‚ï¼Œå¹¶è¿”å›204")]),s("li",[this._v("å…¶å®ƒè¯·æ±‚æœåŠ¡å™¨ç«¯éœ€è¦æ·»åŠ http headerså³å¯ï¼Œæ‰€æœ‰éªŒè¯é€»è¾‘å‡åœ¨æµè§ˆå™¨ç«¯å®Œæˆã€‚")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"æ”¯æŒcookiesçš„è·¨åŸŸ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ”¯æŒcookiesçš„è·¨åŸŸ","aria-hidden":"true"}},[this._v("#")]),this._v(" æ”¯æŒCookiesçš„è·¨åŸŸ")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("è‹¥æ¥å£ï¼ˆæ¯”å¦‚http://api.com/pingï¼‰éœ€è¦åœ¨è‡ªå·±åŸŸï¼ˆhttp://api.comï¼‰ä¸‹è¯»å†™Cookies, åœ¨æ²¡æœ‰ "),s("code",[this._v("Access-Control-Allow-Credentials: true")]),this._v(" çš„è¯·æ±‚ä¸­ï¼ŒCookiesæ˜¯ä¸æ”¯æŒçš„ï¼Œå³ æ¥å£ä¸èƒ½å¤Ÿè¯»å†™åŸŸä¸‹çš„Cookies ã€‚")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v('// OPTION Request\nOPTIONS /api/v1/captcha?deviceId=web20180110_71007&platform=desktop-web&env=Chrome&vendor=web&lang=&appVer=4.0.0 HTTP/1.1\nHost: test-oauth.itiger.com\nAccess-Control-Request-Method: GET\nOrigin: https://test-web.itiger.com\nAccess-Control-Request-Headers: authorization\nAccept: */*\nAccept-Encoding: gzip, deflate, br\nAccept-Language: zh-CN,zh;q=0.9,en-US;q=0.8,en;q=0.7\n\n\n// OPTION Response\nHTTP/1.1 204 No Content\nDate: Wed, 10 Jan 2018 09:13:22 GMT\nContent-Type: text/plain charset=UTF-8\nConnection: keep-alive\nServer: nginx/1.9.6\nAccess-Control-Allow-Origin: https://test-web.itiger.com\nAccess-Control-Allow-Credentials: true\nAccess-Control-Allow-Methods: POST, GET, OPTIONS, HEAD, DELETE, PUT\nAccess-Control-Allow-Headers: DNT,X-CustomHeader,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Authorization\n\n\n// GET Request\nGET /api/v1/captcha?deviceId=web20180110_71007&platform=desktop-web&env=Chrome&vendor=web&lang=&appVer=4.0.0 HTTP/1.1\nHost: test-oauth.itiger.com\nConnection: keep-alive\n\nAccept: application/json, text/plain, */*\nOrigin: https://test-web.itiger.com\nAuthorization: Bearer gMnH2uCUzsoncdiC90XJaYDpoYgxDYiBMydIUGfC9NDkfSiiD0\n\n\n\n// GET Response\nHTTP/1.1 200 OK\nDate: Wed, 10 Jan 2018 09:16:19 GMT\nContent-Type: application/json\nTransfer-Encoding: chunked\nConnection: keep-alive\nVary: Accept-Encoding\nServer: TornadoServer/3.2.2\nEtag: W/"d8b94d7da2b3d9cec8a195d024dea7147a470d4b"\nPragma: no-store\nCache-Control: no-store\nSet-Cookie: captcha="2|1:0|10:1515575779|7:captcha|88:NDdkNmYzYjYwMzQ5N2ViNTU0YjQ0YmEyNTY3MDVjZmVkMWNmZTc1ODRmNzNiNGNjN2M1Yzc5Mzg4MjE0YTg3Yg==|7fe5bc2d6d748af5fd3442a09ad07f8d819db249e0c13d1047e1411611e25878"; expires=Fri, 09 Feb 2018 09:16:19 GMT; Path=/\nAccess-Control-Allow-Origin: https://test-web.itiger.com\nAccess-Control-Allow-Credentials: true\nAccess-Control-Allow-Methods: POST, GET, OPTIONS, HEAD, DELETE, PUT\nAccess-Control-Allow-Headers: Referer,Accept,Origin,User-Agent,Authorization,NT,X-CustomHeader,Keep-Alive,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Connection,DNT\nContent-Encoding: gzip\n')])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("// Vanilla")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("let")]),t._v(" xhr "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("XMLHttpRequest")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nxhr"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("withCredentials "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("// JQuery")]),t._v("\n$"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("ajax")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    type"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'POST'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    data"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    dataType"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'json'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    xhrFields"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n       withCredentials"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("// Vue-resource")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" result "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$http"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token keyword"}},[t._v("get")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  credentials"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"è°ƒè¯•corsè¯·æ±‚é—®é¢˜"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#è°ƒè¯•corsè¯·æ±‚é—®é¢˜","aria-hidden":"true"}},[this._v("#")]),this._v(" è°ƒè¯•CORSè¯·æ±‚é—®é¢˜")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"ç®€å•åˆ¤å®šæ˜¯å¦corsé—®é¢˜ï¼Œ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç®€å•åˆ¤å®šæ˜¯å¦corsé—®é¢˜ï¼Œ","aria-hidden":"true"}},[this._v("#")]),this._v(" ç®€å•åˆ¤å®šæ˜¯å¦CORSé—®é¢˜ï¼Œ")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"/assets/images/15179075649303.jpg",alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("æ³¨æ„ï¼š\nå¼€å¯å¹¶ç”¨é»˜è®¤é…ç½®("),s("em",[this._v("ğŸ˜•/")]),this._v(")ï¼Œå¯èƒ½ä¼šå¯¼è‡´æŸäº›ç½‘ç«™è®¿é—®å¼‚å¸¸ï¼Œå¦‚GitHubã€‚å»ºè®®è‡ªè¡Œæ·»åŠ è¿‡æ»¤ã€‚\næ­¤ç§æ–¹æ³•ä¹Ÿé€‚ç”¨äºå¼€å‘æ—¶è°ƒç”¨æš‚æœªé…ç½®è·¨åŸŸçš„æ¥å£ã€‚")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"ç”¨charlesä¿®æ”¹httpè¯·æ±‚è°ƒè¯•"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç”¨charlesä¿®æ”¹httpè¯·æ±‚è°ƒè¯•","aria-hidden":"true"}},[this._v("#")]),this._v(" ç”¨Charlesä¿®æ”¹HTTPè¯·æ±‚è°ƒè¯•")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"nginx-é…ç½®å‚è€ƒ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nginx-é…ç½®å‚è€ƒ","aria-hidden":"true"}},[this._v("#")]),this._v(" Nginx é…ç½®å‚è€ƒ")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-nginx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-nginx"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("map")]),t._v(" "),a("span",{attrs:{class:"token variable"}},[t._v("$http_origin")]),t._v(" "),a("span",{attrs:{class:"token variable"}},[t._v("$allow_origin")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  default "),a("span",{attrs:{class:"token string"}},[t._v('""')]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{attrs:{class:"token string"}},[t._v('"~^https?://(?:[^/]*\\.)?(stevebuzonas\\.(?:com|local))(?::[0-9]+)?$"')]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"$http_origin"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("map")]),t._v(" "),a("span",{attrs:{class:"token variable"}},[t._v("$request_method")]),t._v(" "),a("span",{attrs:{class:"token variable"}},[t._v("$cors_method")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  default "),a("span",{attrs:{class:"token string"}},[t._v('"allowed"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{attrs:{class:"token string"}},[t._v('"OPTIONS"')]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"preflight"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("map")]),t._v(" "),a("span",{attrs:{class:"token variable"}},[t._v("$cors_method")]),t._v(" "),a("span",{attrs:{class:"token variable"}},[t._v("$cors_max_age")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  default "),a("span",{attrs:{class:"token string"}},[t._v('""')]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{attrs:{class:"token string"}},[t._v('"preflight"')]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("1728000")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("map")]),t._v(" "),a("span",{attrs:{class:"token variable"}},[t._v("$cors_method")]),t._v(" "),a("span",{attrs:{class:"token variable"}},[t._v("$cors_allow_methods")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  default "),a("span",{attrs:{class:"token string"}},[t._v('""')]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{attrs:{class:"token string"}},[t._v('"preflight"')]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"GET, POST, OPTIONS"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("map")]),t._v(" "),a("span",{attrs:{class:"token variable"}},[t._v("$cors_method")]),t._v(" "),a("span",{attrs:{class:"token variable"}},[t._v("$cors_allow_headers")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  default "),a("span",{attrs:{class:"token string"}},[t._v('""')]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{attrs:{class:"token string"}},[t._v('"preflight"')]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"Authorization,Content-Type,Accept,Origin,User-Agent,DNT,Cache-Control,X-Mx-ReqToken,Keep-Alive,X-Requested-With,If-Modified-Since,Authorization"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("map")]),t._v(" "),a("span",{attrs:{class:"token variable"}},[t._v("$cors_method")]),t._v(" "),a("span",{attrs:{class:"token variable"}},[t._v("$cors_content_length")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  default "),a("span",{attrs:{class:"token variable"}},[t._v("$initial_content_length")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{attrs:{class:"token string"}},[t._v('"preflight"')]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("0")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("map")]),t._v(" "),a("span",{attrs:{class:"token variable"}},[t._v("$cors_method")]),t._v(" "),a("span",{attrs:{class:"token variable"}},[t._v("$cors_content_type")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  default "),a("span",{attrs:{class:"token variable"}},[t._v("$initial_content_type")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{attrs:{class:"token string"}},[t._v('"preflight"')]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"text/plain charset=UTF-8"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("add_header")]),t._v(" Access"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("Control"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token keyword"}},[t._v("Allow")]),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("Origin "),a("span",{attrs:{class:"token variable"}},[t._v("$allow_origin")]),t._v(" always"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("add_header")]),t._v(" Access"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("Control"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token keyword"}},[t._v("Allow")]),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("Credentials "),a("span",{attrs:{class:"token string"}},[t._v("'true'")]),t._v(" always"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("add_header")]),t._v(" Access"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("Control"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("Max"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("Age "),a("span",{attrs:{class:"token variable"}},[t._v("$cors_max_age")]),t._v(" always"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("add_header")]),t._v(" Access"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("Control"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token keyword"}},[t._v("Allow")]),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("Methods "),a("span",{attrs:{class:"token variable"}},[t._v("$cors_allow_methods")]),t._v(" always"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("add_header")]),t._v(" Access"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("Control"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token keyword"}},[t._v("Allow")]),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("Headers "),a("span",{attrs:{class:"token variable"}},[t._v("$cors_allow_headers")]),t._v(" always"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("set")]),t._v(" "),a("span",{attrs:{class:"token variable"}},[t._v("$initial_content_length")]),t._v(" "),a("span",{attrs:{class:"token variable"}},[t._v("$sent_http_content_length")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("add_header")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'Content-Length'")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('""')]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("add_header")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'Content-Length'")]),t._v(" "),a("span",{attrs:{class:"token variable"}},[t._v("$cors_content_length")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("set")]),t._v(" "),a("span",{attrs:{class:"token variable"}},[t._v("$initial_content_type")]),t._v(" "),a("span",{attrs:{class:"token variable"}},[t._v("$sent_http_content_type")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("add_header")]),t._v(" Content"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("Type "),a("span",{attrs:{class:"token string"}},[t._v('""')]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("add_header")]),t._v(" Content"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("Type "),a("span",{attrs:{class:"token variable"}},[t._v("$cors_content_type")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token variable"}},[t._v("$request_method")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'OPTIONS'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("204")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ol",[a("li",[t._v("ç›¸å…³Access-Controlçš„add_headerååŠ äº†"),a("code",[t._v("always")]),t._v("ï¼Œå› ä¸ºé»˜è®¤æƒ…å†µä¸‹ï¼Œ"),a("code",[t._v("add_header")]),t._v("åªä½œç”¨äºçŠ¶æ€ç ä¸º 200, 201 (1.3.10), 204, 206, 301, 302, 303, 304, 307 (1.1.16, 1.0.13), or 308 (1.13.0) ä¹‹ä¸­çš„å“åº”ï¼Œå¹¶ä¸æ”¯æŒ40x,50xç­‰ï¼Œå› æ­¤æ·»åŠ "),a("code",[t._v("always")]),t._v("å¯ä»¥æ”¯æŒæ‰€æœ‰çŠ¶æ€ç ã€‚ è§ï¼šhttp://nginx.org/en/docs/http/ngx_http_headers_module.html#add_header")]),a("li",[t._v("ä¹‹æ‰€ä»¥ç”¨"),a("code",[t._v("map")]),t._v("å‘½ä»¤è€Œä¸æ˜¯"),a("code",[t._v("if")]),t._v("ï¼Œæ˜¯ç”±äºifå…¶å®æ˜¯å½’å±äºnginx_rewriteæ¨¡å—çš„ï¼Œå¯¹äº"),a("code",[t._v("try_files")]),t._v("ç­‰ä¼šä¸æ”¯æŒï¼ŒNginxå®˜æ–¹ä¹Ÿå¹¶ä¸å»ºè®®ä½¿ç”¨"),a("code",[t._v("if")]),t._v("ã€‚è§ï¼šhttps://www.nginx.com/resources/wiki/start/topics/depth/ifisevil/")]),a("li",[t._v("ä»¥ä¸Š"),a("code",[t._v("nginx-cors.conf")]),t._v("å¯å¦‚ä¸‹æ–¹å¼ä½¿ç”¨ï¼š")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-nginx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-nginx"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("location")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("include")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("nginx"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("cors"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("conf"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("proxy_pass")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("http")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{attrs:{class:"token operator"}},[t._v("/")]),a("span",{attrs:{class:"token operator"}},[t._v("/")]),a("span",{attrs:{class:"token number"}},[t._v("127.0")]),a("span",{attrs:{class:"token number"}},[t._v(".0")]),a("span",{attrs:{class:"token number"}},[t._v(".1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{attrs:{class:"token number"}},[t._v("4000")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  proxy_set_http_header HOST "),a("span",{attrs:{class:"token variable"}},[t._v("$http_host")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"å‚è€ƒèµ„æº"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å‚è€ƒèµ„æº","aria-hidden":"true"}},[this._v("#")]),this._v(" å‚è€ƒèµ„æº")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("https://www.w3.org/TR/cors/")]),s("li",[this._v("https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS")]),s("li",[this._v("https://www.test-cors.org/")]),s("li",[this._v("https://enable-cors.org/index.html")]),s("li",[this._v("https://www.html5rocks.com/en/tutorials/cors/")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"æ‰©å±•çŸ¥è¯†"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ‰©å±•çŸ¥è¯†","aria-hidden":"true"}},[this._v("#")]),this._v(" æ‰©å±•çŸ¥è¯†")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("HTTPS")]),s("li",[this._v("Nginx")]),s("li",[this._v("CSP")]),s("li",[this._v("HTTP/1.1 vs HTTP2")])])}],!1,null,null,null);s.default=e.exports}}]);